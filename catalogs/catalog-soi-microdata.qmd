---
title: "Statistics of Income (SOI) Microdata Samples"
# Format and execute settings inherited from _quarto.yml
---

```{r}
#| echo: false

library( dplyr )
library( knitr )
library( kableExtra )
library( stringr )
library( flextable )
library( pander )

GH.RAW <- "https://raw.githubusercontent.com/UrbanInstitute/nccs/main/catalogs/"
d <- read.csv( paste0( GH.RAW, "AWS-NCCSDATA.csv" ) )
source( paste0( GH.RAW, "build-catalog-functions.R" ) )
```

<br>

<hr>

<br>

Files are organized as follows:

**TAX EXEMPT TYPE (tscope)**

-   CHARITIES - 501c3 nonprofit organizations
-   NONPROFITS - All other 501c type organizations besides 501c3
-   PRIVATE FOUNDATIONS - 501c3 private foundations

**IRS 990 FORM SCOPE (fscope)**

Nonprofits can file Form 990, 990EZ, 990PF, or 990N.

Private foundations must file Form 990PF. Small nonprofits can file form 990EZ, which is a shorter version of the full form. Organizations with more than \$250k in revenues must file full Form 990.

Very small nonprofits (revenues less than \$50k annually) can file Form 990N (the postcard form). Since they disclose no finances or organizational activities form 990N filers are not included in the Core Data Series.

Form scope describes which types of filers are included in each data set:

-   **EZ**: 990EZ filers
-   **PC**: 990 filers only
-   **PF**: 990PF private foundations

**YEAR**

Files are organized by **tax year**, not calendar year, filing year, or accounting year. See the Research Handbook for details on the differences.

<br>

<hr>

<br>

#### 501c3 CHARITIES FSCOPE PC

```{r}
#| echo: false
#| output: asis
 
catalog <- 
  construct_catalog( 
       s3_catalog = d,
       series     = "soi",
       paths      = d$Key,
       tscope     = "CHARITIES",
       fscope     = "PC",
       np_type    = "501C3-CHARITIES" )

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c("Download Link", 
                              "Data Dictionary",
                              "Size",
                              "Year",
                              "Nonprofit Type",
                              "Form Scope" ) ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

#### 501c3 CHARITIES FSCOPE EZ

```{r}
#| echo: false
catalog <- construct_catalog(s3_catalog = d,
                             series = "soi",
                             paths = d$Key,
                             tscope = "CHARITIES",
                             fscope = "EZ",
                             np_type = "501C3-CHARITIES")

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c("Download Link", 
                              "Data Dictionary",
                              "Size",
                              "Year",
                              "Nonprofit Type",
                              "Form Scope" ) ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

#### NONPROFITS FSCOPE PC

```{r}
#| echo: false
catalog <- construct_catalog(s3_catalog = d,
                             series = "soi",
                             paths = d$Key,
                             tscope = "NONPROFIT",
                             fscope = "PC",
                             np_type = "501CE-NONPROFIT")

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c("Download Link", 
                              "Data Dictionary",
                              "Size",
                              "Year",
                              "Nonprofit Type",
                              "Form Scope" ) ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

#### NONPROFITS FSCOPE EZ

```{r}
#| echo: false
catalog <- construct_catalog(s3_catalog = d,
                             series = "soi",
                             paths = d$Key,
                             tscope = "NONPROFIT",
                             fscope = "EZ",
                             np_type = "501CE-NONPROFIT")

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c("Download Link", 
                              "Data Dictionary",
                              "Size",
                              "Year",
                              "Nonprofit Type",
                              "Form Scope" ) ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

#### PRIVATE FOUNDATIONS FSCOPE PF

```{r}
#| echo: false
catalog <- construct_catalog(s3_catalog = d,
                             series = "soi",
                             paths = d$Key,
                             tscope = "PRIVFOUND",
                             fscope = "PF",
                             np_type = "501C3-PRIVFOUND")

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c("Download Link", 
                              "Data Dictionary",
                              "Size",
                              "Year",
                              "Nonprofit Type",
                              "Form Scope" ) ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

<!-- Styles loaded from shared catalog.css via _quarto.yml -->
